<!--
  Blorbioteca is a free and open source character and world repository.
  Copyright (C) 2025 Hannah Kirkland

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

{% extends 'base.html' %}

{% block content %}
  {% if profile_user %}
  <div class='profile'>
    <div class='sidebar_container'>
      <img class='pfp' src="{{ profile_user.pfp.url }}">
      <h1 id='name'><strong>{{ profile_user.name }}</strong></h1>

      <table>
        <tr>
          <th>Username</th>
          <td>{{ profile_user.user.username }}</td>
        </tr>
        {% if profile_user.pronouns %}
        <tr>
          <th>Pronouns</th>
          <td>{{ profile_user.pronouns }}</td>
        </tr>
        {% endif %}
        {% for social in profile_user.social_links %}
          <tr>
            {% if social.label %}
            <th title={{ social.label }}>{{ social.label }}</th>
            {% else %}
            <th title={{ social.type|title }}>
              {% if social.type == 'bluesky' %}
              <i class='nf nf-fae-butterfly'></i>
              {% elif social.type == 'instagram' %}
              <i class='nf nf-fa-instagram'></i>
              {% elif social.type == 'tumblr' %}
              <i class='nf nf-fa-square_tumblr'></i>
              {% elif social.type == 'twitter' %}
              <i class='nf nf-cod-twitter'></i>
              {% elif social.type == 'youtube' %}
              <i class='nf nf-fa-youtube'></i>
              {% else %}
              <i class='nf nf-fa-globe'></i>
              {% endif %}
            </th>
            {% endif %}
            <td><a target='_blank' rel='noopener noreferrer' href={{ social.link }}>{{ social.link }}</a></td>
          </tr>
        {% endfor %}
      </table>

      <div class='bio_info'>
        <p id='bio'>{{ profile_user.bio|safe }}</p>
      </div>
    </div>
    <div class='gallery_container'>
      <div id='profile-buttons'>
        {% if user.is_authenticated %}
          {% if user.id == profile_user.user.id %}
            <form action={% url 'edit-profile' %} id='profile-edit-button' class='inline-edit-form'>
                <button type='submit'>Edit Profile</button>
            </form>
          {% endif %}
        {% endif %}
        {% if user.id == profile_user.user.id %}
          <form action={% url 'new-character' %} class='inline-edit-form'>
              <button type='submit'>New Character</button>
          </form>
        {% endif %}
      </div>
      <div class='sheet-list'>
        <h1><strong>Character Gallery</strong></h1>
        {% for character in characters %}
        <a href={% url 'character-sheet' pk=character.id %}>{{ character.name }}</a>
        <br>
        {% endfor %}
      </div>
  </div>
  {% else %}
    <h1>User not found.</h1>
  {% endif %}
{% endblock %}
